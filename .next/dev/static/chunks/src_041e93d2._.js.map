{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/rober/OneDrive/Desktop/web%20dev%20projects/Roof-Track/src/types/Lead.ts"],"sourcesContent":["export const LeadStatus = [\r\n    'not contacted',\r\n    'contacted',\r\n    'inspection',\r\n    'damages',\r\n    'follow up',\r\n    'closed - won',\r\n    'closed - lost',\r\n    'contractor',\r\n    'not interested',\r\n    'do not contact',\r\n] as const;\r\n\r\nexport const StatusColors: Record<LeadStatus, string> = {\r\n    'not contacted': '#04be04',\r\n    'contacted': '#faf605',\r\n    'inspection': '#ff7b00',\r\n    'damages': '#ff0000',\r\n    'follow up': '#f70098',\r\n    'closed - won': '#0c6800',\r\n    'closed - lost': '#2c2c2c',\r\n    'contractor': '#2c2c2c',\r\n    'not interested': '#2c2c2c',\r\n    'do not contact': '#2c2c2c',\r\n};\r\n\r\nexport type LeadStatus = (typeof LeadStatus)[number]; \r\n\r\ninterface Lead {\r\n    /* basic lead info */\r\n    id: string;\r\n    fullName: string;\r\n    email: string;\r\n    phoneNumber: number;\r\n    address: string;\r\n    datedAdded: Date;\r\n    status: LeadStatus;\r\n    /** Geographic coordinates of the lead's address for knock map tracker */\r\n    coordinates?: {\r\n        latitude: number;\r\n        longitude: number;\r\n    };\r\n    notes?: string;\r\n    preferredContactMethod: 'email' | 'phone' | 'none'; /*set up for marketing/contact tasks*/\r\n    dateLastContacted: Date;\r\n}\r\n\r\nexport default Lead;"],"names":[],"mappings":";;;;;;AAAO,MAAM,aAAa;IACtB;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;CACH;AAEM,MAAM,eAA2C;IACpD,iBAAiB;IACjB,aAAa;IACb,cAAc;IACd,WAAW;IACX,aAAa;IACb,gBAAgB;IAChB,iBAAiB;IACjB,cAAc;IACd,kBAAkB;IAClB,kBAAkB;AACtB"}},
    {"offset": {"line": 41, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/rober/OneDrive/Desktop/web%20dev%20projects/Roof-Track/src/components/territoryMap.tsx"],"sourcesContent":["'use client';\r\nimport { useCallback, useEffect, useRef, useState } from 'react';\r\nimport { GoogleMap, Marker, useJsApiLoader } from '@react-google-maps/api';\r\nimport { LeadStatus, StatusColors } from '@/types/Lead';\r\nimport { createClient } from '@/lib/supabase/client';\r\nimport { useRouter } from 'next/navigation';\r\nimport toast from 'react-hot-toast';\r\n\r\ntype MapMarker = {\r\n    id: string;\r\n    position: { lat: number; lng: number };\r\n    status: LeadStatus;\r\n};\r\n\r\ntype TerritoryMapProps = {\r\n    center?: { lat: number; lng: number };\r\n    zoom?: number;\r\n};\r\n\r\nconst leadTriggerStatuses: LeadStatus[] = ['inspection', 'damages', 'follow up'];\r\n\r\nfunction getMarkerIcon(status: LeadStatus) {\r\n    return {\r\n        path: \"M 0,0 C -2,-20 -10,-22 -10,-32 A 10,10 0 0,1 10,-32 C 10,-22 2,-20 0,0\",\r\n        fillColor: StatusColors[status],\r\n        fillOpacity: 1,\r\n        strokeColor: '#000000',\r\n        strokeWeight: 1.5,\r\n        scale: 0.8,\r\n    };\r\n}\r\n\r\nexport default function TerritoryMap({\r\n    center = { lat: 41.2565, lng: -95.9345 },\r\n    zoom = 12,\r\n}: TerritoryMapProps) {\r\n    const supabase = createClient();\r\n    \r\n    // State\r\n    const [currentUser, setCurrentUser] = useState<{ userId: string; companyId: string } | null>(null);\r\n    const [markers, setMarkers] = useState<MapMarker[]>([]);\r\n    const [selectedMarker, setSelectedMarker] = useState<MapMarker | null>(null);\r\n    const [selectedLead, setSelectedLead] = useState<any>(null);  \r\n    const [leadFormData, setLeadFormData] = useState({\r\n        fullName: '',\r\n        email: '',\r\n        phoneNumber: '',\r\n        address: '',\r\n        notes: '',\r\n        preferredContactMethod: 'none' as 'email' | 'phone' | 'none',\r\n    });\r\n    const [loadingUser, setLoadingUser] = useState(true);\r\n    const [loadingMarkers, setLoadingMarkers] = useState(true);\r\n    const router = useRouter();\r\n    const mapRef = useRef<google.maps.Map | null>(null);\r\n\r\n    const { isLoaded } = useJsApiLoader({\r\n        googleMapsApiKey: 'AIzaSyBAgEjpI9L3Wu-NJyPv--kzsuPsGx5m7nY',\r\n    });\r\n\r\n    // Fetch current user on mount\r\n    useEffect(() => {\r\n        const getCurrentUser = async () => {\r\n            try {\r\n                const { data: { user } } = await supabase.auth.getUser();\r\n                if (user) {\r\n                    const { data: profile } = await supabase\r\n                        .from('profiles')\r\n                        .select('company_id')\r\n                        .eq('id', user.id)\r\n                        .single();\r\n\r\n                    setCurrentUser({ \r\n                        userId: user.id, \r\n                        companyId: profile?.company_id \r\n                    });\r\n                }\r\n            } catch (err) {\r\n                console.error('Error fetching user:', err);\r\n            } finally {\r\n                setLoadingUser(false);\r\n            }\r\n        };\r\n        getCurrentUser();\r\n    }, []);\r\n\r\n    // Fetch leads as markers when user is ready\r\n    useEffect(() => {\r\n        if (currentUser) {\r\n            fetchLeadsAsMarkers();\r\n        }\r\n    }, [currentUser]);\r\n\r\n    const fetchLeadsAsMarkers = async () => {\r\n        if (!currentUser) return;\r\n\r\n        try {\r\n            const { data: leads, error } = await supabase\r\n                .from('leads')\r\n                .select('*')\r\n                .eq('company_id', currentUser.companyId)\r\n                .not('latitude', 'is', null)\r\n                .not('longitude', 'is', null);\r\n\r\n            if (error) throw error;\r\n\r\n            const leadMarkers: MapMarker[] = (leads || []).map(lead => ({\r\n                id: lead.id,\r\n                position: {\r\n                    lat: lead.latitude,\r\n                    lng: lead.longitude,\r\n                },\r\n                status: lead.status,\r\n            }));\r\n\r\n            setMarkers(leadMarkers);\r\n        } catch (err) {\r\n            console.error('Error fetching leads:', err);\r\n        } finally {\r\n            setLoadingMarkers(false);\r\n        }\r\n    };\r\n\r\n    const handleMarkerClick = async (marker: MapMarker) => {\r\n    setSelectedMarker(marker);\r\n    \r\n    // If this is an existing marker (not a temp new one), fetch full lead data\r\n    if (!marker.id.startsWith('temp-')) {\r\n        try {\r\n            const { data: leadData, error } = await supabase\r\n                .from('leads')\r\n                .select('*')\r\n                .eq('id', marker.id)\r\n                .single();\r\n            \r\n            if (error) throw error;\r\n            \r\n            // Store the full lead data\r\n            setSelectedLead(leadData);\r\n        } catch (err) {\r\n            console.error('Error fetching lead for marker:', err);\r\n        }\r\n    }\r\n};\r\n\r\n    const onLoad = useCallback((map: google.maps.Map) => {\r\n        mapRef.current = map;\r\n        map.setCenter(center);\r\n    }, [center]);\r\n\r\n    const onUnmount = useCallback(() => {\r\n        mapRef.current = null;\r\n    }, []);\r\n\r\n    const handleMapClick = useCallback((e: google.maps.MapMouseEvent) => {\r\n        if (!e.latLng) return;\r\n        \r\n        const newMarker: MapMarker = {\r\n            id: `temp-${Date.now()}`, // Temporary ID until saved\r\n            position: { \r\n                lat: e.latLng.lat(), \r\n                lng: e.latLng.lng() \r\n            },\r\n            status: 'not contacted',\r\n        };\r\n        \r\n        setSelectedMarker(newMarker);\r\n    }, []);\r\n\r\n    const handleCreateLead = async () => {\r\n        if (!currentUser) {\r\n            alert('You must be logged in to create a lead');\r\n            return;\r\n        }\r\n\r\n        if (!selectedMarker) return;\r\n\r\n        try {\r\n            const { data, error } = await supabase\r\n                .from('leads')\r\n                .insert([{\r\n                    company_id: currentUser.companyId,\r\n                    user_id: currentUser.userId,\r\n                    full_name: leadFormData.fullName,\r\n                    email: leadFormData.email,\r\n                    phone_number: leadFormData.phoneNumber,\r\n                    address: leadFormData.address,\r\n                    status: selectedMarker.status,\r\n                    latitude: selectedMarker.position.lat,\r\n                    longitude: selectedMarker.position.lng,\r\n                    notes: leadFormData.notes,\r\n                    preferred_contact_method: leadFormData.preferredContactMethod\r\n                }])\r\n                .select()\r\n                .single();\r\n\r\n            if (error) throw error;\r\n\r\n            // Update marker with real ID from database\r\n            const updatedMarker: MapMarker = {\r\n                id: data.id,\r\n                position: selectedMarker.position,\r\n                status: selectedMarker.status,\r\n            };\r\n\r\n            // Add to markers array\r\n            setMarkers([...markers, updatedMarker]);\r\n\r\n            // Close popup and reset form\r\n            setSelectedMarker(null);\r\n            setLeadFormData({\r\n                fullName: '',\r\n                email: '',\r\n                phoneNumber: '',\r\n                address: '',\r\n                notes: '',\r\n                preferredContactMethod: 'none'\r\n            });\r\n\r\n            toast.success('Lead created successfully!');\r\n\r\n            //If status is inspection, ask to schedule\r\n        if (updatedMarker.status === 'inspection') {\r\n            const shouldSchedule = confirm('Would you like to schedule an inspection now?');\r\n            if (shouldSchedule) {\r\n                // Navigate to the lead detail page to schedule\r\n                router.push(`/dashboard/leads/${data.id}`);\r\n            }\r\n        }\r\n\r\n        } catch (err: any) {\r\n            console.error('Error creating lead:', err);\r\n            toast.error('Failed to create lead: ' + err.message);\r\n        }\r\n    };\r\n\r\n    const handleSavePin = async () => {\r\n    if (!currentUser) {\r\n        alert('You must be logged in to save a pin');\r\n        return;\r\n    }\r\n\r\n    if (!selectedMarker) return;\r\n\r\n    try {\r\n        const { data, error } = await supabase\r\n            .from('leads')\r\n            .insert([{\r\n                company_id: currentUser.companyId,\r\n                user_id: currentUser.userId,\r\n                full_name: 'Unknown', // Default for pins without forms\r\n                email: '',\r\n                phone_number: '',\r\n                address: 'See map location',\r\n                status: selectedMarker.status,\r\n                latitude: selectedMarker.position.lat,\r\n                longitude: selectedMarker.position.lng,\r\n                notes: `Pin dropped with status: ${selectedMarker.status}`,\r\n                preferred_contact_method: 'none'\r\n            }])\r\n            .select()\r\n            .single();\r\n\r\n        if (error) throw error;\r\n\r\n        // Update marker with real ID from database\r\n        const updatedMarker: MapMarker = {\r\n            id: data.id,\r\n            position: selectedMarker.position,\r\n            status: selectedMarker.status,\r\n        };\r\n\r\n        // Add to markers array\r\n        setMarkers([...markers, updatedMarker]);\r\n\r\n        // Close popup\r\n        setSelectedMarker(null);\r\n\r\n        toast.success('Pin saved successfully!');\r\n\r\n    } catch (err: any) {\r\n        console.error('Error saving pin:', err);\r\n        alert('Failed to save pin: ' + err.message);\r\n    }\r\n};\r\n\r\n    // Show loading state\r\n    if (!isLoaded || loadingUser || loadingMarkers) {\r\n        return (\r\n            <div className=\"w-full h-[600px] bg-gray-200 rounded-lg flex items-center justify-center\">\r\n                <div className=\"text-center\">\r\n                    <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-900 mx-auto mb-4\"></div>\r\n                    <p className=\"text-gray-600\">Loading Map...</p>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n\r\nreturn (\r\n        <div className=\"w-full flex justify-center items-center relative\">\r\n            {/* Navigation Header */}\r\n            <GoogleMap\r\n                mapContainerStyle={{ width: '95%', height: '70vh' }}\r\n                zoom={zoom}\r\n                onLoad={onLoad}\r\n                onUnmount={onUnmount}\r\n                onClick={handleMapClick}\r\n            >\r\n                {markers.map((marker) => (\r\n                    <Marker\r\n                        key={marker.id}\r\n                        position={marker.position}\r\n                        icon={getMarkerIcon(marker.status)}\r\n                        onClick={() => handleMarkerClick(marker)}\r\n                    />\r\n                ))}\r\n            </GoogleMap>\r\n\r\n            {/* Lead Form Popup */}\r\n           {selectedMarker && (\r\n    <div className=\"absolute top-8 right-48 z-50 bg-white rounded-lg shadow-xl p-6 w-96 max-h-[80vh] overflow-y-auto\">\r\n        <button\r\n            onClick={() => {\r\n                setSelectedMarker(null);\r\n                setSelectedLead(null);  // Also clear lead data\r\n            }}\r\n            className=\"absolute top-2 right-2 text-gray-500 hover:text-gray-700 text-xl\"\r\n        >\r\n            ‚úï\r\n        </button>\r\n\r\n        {/* NEW PIN - Show create form */}\r\n        {selectedMarker.id.startsWith('temp-') ? (\r\n            <>\r\n                <h3 className=\"text-lg font-bold mb-4\">Create New Lead</h3>\r\n                \r\n                {/* Status Dropdown */}\r\n                <div className=\"mb-4\">\r\n                    <label className=\"block text-sm font-semibold mb-2\">Status</label>\r\n                    <select\r\n                        value={selectedMarker.status}\r\n                        onChange={(e) => {\r\n                            const newStatus = e.target.value as LeadStatus;\r\n                            setSelectedMarker({ ...selectedMarker, status: newStatus });\r\n                        }}\r\n                        className=\"w-full p-2 border rounded\"\r\n                    >\r\n                        {LeadStatus.map((status) => (\r\n                            <option key={status} value={status}>\r\n                                {status}\r\n                            </option>\r\n                        ))}\r\n                    </select>\r\n                </div>\r\n\r\n                {/* Your existing conditional form or save button */}\r\n                {leadTriggerStatuses.includes(selectedMarker.status) ? (\r\n                    <div className=\"border-t pt-4 space-y-3\">\r\n                        <div>\r\n                            <label className=\"block text-sm font-medium mb-1\">Full Name *</label>\r\n                            <input\r\n                                type=\"text\"\r\n                                value={leadFormData.fullName}\r\n                                onChange={(e) => setLeadFormData({ ...leadFormData, fullName: e.target.value })}\r\n                                className=\"w-full p-2 border rounded\"\r\n                                required\r\n                            />\r\n                        </div>\r\n\r\n                        <div>\r\n                            <label className=\"block text-sm font-medium mb-1\">Email *</label>\r\n                            <input\r\n                                type=\"email\"\r\n                                value={leadFormData.email}\r\n                                onChange={(e) => setLeadFormData({ ...leadFormData, email: e.target.value })}\r\n                                className=\"w-full p-2 border rounded\"\r\n                                required\r\n                            />\r\n                        </div>\r\n\r\n                        <div>\r\n                            <label className=\"block text-sm font-medium mb-1\">Phone Number *</label>\r\n                            <input\r\n                                type=\"tel\"\r\n                                value={leadFormData.phoneNumber}\r\n                                onChange={(e) => setLeadFormData({ ...leadFormData, phoneNumber: e.target.value })}\r\n                                className=\"w-full p-2 border rounded\"\r\n                                required\r\n                            />\r\n                        </div>\r\n\r\n                        <div>\r\n                            <label className=\"block text-sm font-medium mb-1\">Address *</label>\r\n                            <input\r\n                                type=\"text\"\r\n                                value={leadFormData.address}\r\n                                onChange={(e) => setLeadFormData({ ...leadFormData, address: e.target.value })}\r\n                                className=\"w-full p-2 border rounded\"\r\n                                required\r\n                            />\r\n                        </div>\r\n\r\n                        <div>\r\n                            <label className=\"block text-sm font-medium mb-1\">Preferred Contact Method</label>\r\n                            <select\r\n                                value={leadFormData.preferredContactMethod}\r\n                                onChange={(e) => setLeadFormData({ ...leadFormData, preferredContactMethod: e.target.value as 'email' | 'phone' | 'none' })}\r\n                                className=\"w-full p-2 border rounded\"\r\n                            >\r\n                                <option value=\"none\">None</option>\r\n                                <option value=\"email\">Email</option>\r\n                                <option value=\"phone\">Phone</option>\r\n                            </select>\r\n                        </div>\r\n\r\n                        <div>\r\n                            <label className=\"block text-sm font-medium mb-1\">Notes</label>\r\n                            <textarea\r\n                                value={leadFormData.notes}\r\n                                onChange={(e) => setLeadFormData({ ...leadFormData, notes: e.target.value })}\r\n                                className=\"w-full p-2 border rounded\"\r\n                                rows={3}\r\n                            />\r\n                        </div>\r\n\r\n                        <button\r\n                            onClick={handleCreateLead}\r\n                            className=\"w-full bg-indigo-900 text-white py-2 px-4 rounded hover:bg-indigo-800 transition-colors mt-4\"\r\n                        >\r\n                            Create Lead\r\n                        </button>\r\n                    </div>\r\n                ) : (\r\n                    <div className=\"border-t pt-4\">\r\n                        <p className=\"text-sm text-gray-600 mb-3\">\r\n                            This status doesn't require detailed lead information.\r\n                        </p>\r\n                        <button\r\n                            onClick={handleSavePin}\r\n                            className=\"w-full bg-indigo-900 text-white py-2 px-4 rounded hover:bg-indigo-800 transition-colors\"\r\n                        >\r\n                            Save Pin\r\n                        </button>\r\n                    </div>\r\n                )}\r\n            </>\r\n        ) : (\r\n            /* EXISTING PIN - Show lead summary */\r\n            selectedLead ? (\r\n                <>\r\n                    <h3 className=\"text-lg font-bold mb-4\">Lead Details</h3>\r\n                    \r\n                    <div className=\"space-y-3\">\r\n                        <div>\r\n                            <label className=\"text-xs text-gray-500\">Name</label>\r\n                            <p className=\"font-semibold\">{selectedLead.full_name}</p>\r\n                        </div>\r\n                        \r\n                        <div>\r\n                            <label className=\"text-xs text-gray-500\">Status</label>\r\n                            <span\r\n                                className=\"inline-block px-3 py-1 rounded-full text-xs font-semibold text-white mt-1\"\r\n                                style={{ backgroundColor: StatusColors[selectedLead.status as LeadStatus] }}\r\n                            >\r\n                                {selectedLead.status}\r\n                            </span>\r\n                        </div>\r\n                        \r\n                        {selectedLead.email && (\r\n                            <div>\r\n                                <label className=\"text-xs text-gray-500\">Email</label>\r\n                                <p className=\"text-sm\">{selectedLead.email}</p>\r\n                            </div>\r\n                        )}\r\n                        \r\n                        {selectedLead.phone_number && (\r\n                            <div>\r\n                                <label className=\"text-xs text-gray-500\">Phone</label>\r\n                                <p className=\"text-sm\">{selectedLead.phone_number}</p>\r\n                            </div>\r\n                        )}\r\n                        \r\n                        {selectedLead.address && (\r\n                            <div>\r\n                                <label className=\"text-xs text-gray-500\">Address</label>\r\n                                <p className=\"text-sm\">{selectedLead.address}</p>\r\n                            </div>\r\n                        )}\r\n                    </div>\r\n                    \r\n                    <button\r\n                        onClick={() => router.push(`/dashboard/leads/${selectedLead.id}`)}\r\n                        className=\"w-full mt-4 bg-indigo-900 text-white py-2 px-4 rounded hover:bg-indigo-800 transition-colors\"\r\n                    >\r\n                        View Full Details ‚Üí\r\n                    </button>\r\n                </>\r\n            ) : (\r\n                <p className=\"text-center py-4\">Loading lead...</p>\r\n            )\r\n        )}\r\n    </div>\r\n)}    \r\n        </div>\r\n    );\r\n}"],"names":[],"mappings":"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"}},
    {"offset": {"line": 858, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/rober/OneDrive/Desktop/web%20dev%20projects/Roof-Track/src/components/leads/LeadMiniCard.tsx"],"sourcesContent":["'use client';\r\nimport { useRouter } from 'next/navigation';\r\nimport { StatusColors, LeadStatus } from '@/types/Lead';\r\n\r\ntype LeadMiniCardProps = {\r\n    lead: {\r\n        id: string;\r\n        full_name: string;\r\n        email: string;\r\n        phone_number: string;\r\n        address: string;\r\n        status: LeadStatus;\r\n        date_added: string;\r\n        date_last_contacted?: string;\r\n    };\r\n    onClick: () => void;\r\n    hasUpcomingInspection?: boolean;\r\n};\r\n    \r\n    export default function LeadMiniCard({ lead, onClick, hasUpcomingInspection }: LeadMiniCardProps) {\r\n    return (\r\n        <div\r\n            onClick={onClick}\r\n            className=\"border rounded-lg p-4 hover:shadow-lg transition-shadow cursor-pointer bg-white\"\r\n        >\r\n            <div className=\"flex justify-between items-start mb-2\">\r\n                <div className=\"flex-1\">\r\n                    <div className=\"flex items-center gap-2\">\r\n                        <h3 className=\"font-bold text-lg\">{lead.full_name}</h3>\r\n                        {/* NEW: Inspection Badge */}\r\n                        {hasUpcomingInspection && (\r\n                            <span className=\"text-xs bg-blue-100 text-blue-800 px-2 py-1 rounded-full font-semibold\">\r\n                                üìÖ Inspection Scheduled\r\n                            </span>\r\n                        )}\r\n                    </div>\r\n                    <p className=\"text-sm text-gray-600\">üìß {lead.email}</p>\r\n                    <p className=\"text-sm text-gray-600\">üìû {lead.phone_number}</p>\r\n                </div>\r\n                <span\r\n                    className=\"px-3 py-1 rounded-full text-xs font-semibold text-white\"\r\n                    style={{ backgroundColor: StatusColors[lead.status as LeadStatus] }}\r\n                >\r\n                    {lead.status}\r\n                </span>\r\n            </div>\r\n            \r\n            <p className=\"text-sm text-gray-500 mt-2\">üìç {lead.address}</p>\r\n        </div>\r\n    );\r\n}"],"names":[],"mappings":";;;;;AAEA;AAFA;;;AAmBmB,SAAS,aAAa,EAAE,IAAI,EAAE,OAAO,EAAE,qBAAqB,EAAqB;IAChG,qBACI,6LAAC;QACG,SAAS;QACT,WAAU;;0BAEV,6LAAC;gBAAI,WAAU;;kCACX,6LAAC;wBAAI,WAAU;;0CACX,6LAAC;gCAAI,WAAU;;kDACX,6LAAC;wCAAG,WAAU;kDAAqB,KAAK,SAAS;;;;;;oCAEhD,uCACG,6LAAC;wCAAK,WAAU;kDAAyE;;;;;;;;;;;;0CAKjG,6LAAC;gCAAE,WAAU;;oCAAwB;oCAAI,KAAK,KAAK;;;;;;;0CACnD,6LAAC;gCAAE,WAAU;;oCAAwB;oCAAI,KAAK,YAAY;;;;;;;;;;;;;kCAE9D,6LAAC;wBACG,WAAU;wBACV,OAAO;4BAAE,iBAAiB,uIAAY,CAAC,KAAK,MAAM,CAAe;wBAAC;kCAEjE,KAAK,MAAM;;;;;;;;;;;;0BAIpB,6LAAC;gBAAE,WAAU;;oBAA6B;oBAAI,KAAK,OAAO;;;;;;;;;;;;;AAGtE;KA/B4B"}},
    {"offset": {"line": 976, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/rober/OneDrive/Desktop/web%20dev%20projects/Roof-Track/src/components/leads/LeadList.tsx"],"sourcesContent":["'use client';\r\nimport { useState, useEffect, forwardRef, useImperativeHandle } from 'react';\r\nimport { useRouter } from 'next/navigation';\r\nimport { createClient } from '@/lib/supabase/client';\r\nimport LeadMiniCard from './LeadMiniCard';\r\n\r\nconst LeadList = forwardRef((props, ref) => {\r\n    const router = useRouter();\r\n    const [leads, setLeads] = useState<any[]>([]);\r\n    const [searchQuery, setSearchQuery] = useState('');\r\n    const [loading, setLoading] = useState(true);\r\n\r\n    // Expose refresh function to parent\r\n    useImperativeHandle(ref, () => ({\r\n        refresh: () => {\r\n            fetchLeads();\r\n        }\r\n    }));\r\n\r\n    // Fetch leads when component mounts\r\n    useEffect(() => {\r\n        fetchLeads();\r\n    }, []);\r\n\r\n    const fetchLeads = async () => {\r\n    console.log('fetchLeads called');\r\n    try {\r\n        const supabase = createClient();\r\n        const { data: { user } } = await supabase.auth.getUser();\r\n        console.log('User:', user);\r\n\r\n        if (!user) {\r\n            console.log('No user found');\r\n            setLoading(false);\r\n            return;\r\n        }\r\n\r\n        const { data: profile } = await supabase\r\n            .from('profiles')\r\n            .select('company_id')\r\n            .eq('id', user.id)\r\n            .single();\r\n        console.log('Profile:', profile);\r\n\r\n        // Fetch leads\r\n        const { data: leadsData, error } = await supabase\r\n            .from('leads')\r\n            .select('*')\r\n            .eq('company_id', profile?.company_id)\r\n            .order('date_added', { ascending: false });\r\n\r\n        console.log('Leads data:', leadsData);\r\n        console.log('Error:', error);\r\n\r\n        if (error) throw error;\r\n\r\n        // Fetch upcoming inspections for these leads\r\n        const today = new Date().toISOString().split('T')[0];\r\n        const { data: inspectionsData } = await supabase\r\n            .from('inspections')\r\n            .select('lead_id')\r\n            .eq('company_id', profile?.company_id)\r\n            .eq('status', 'scheduled')\r\n            .gte('scheduled_date', today);\r\n\r\n        // Create a Set of lead IDs that have upcoming inspections\r\n        const leadsWithInspections = new Set(\r\n            inspectionsData?.map(insp => insp.lead_id) || []\r\n        );\r\n\r\n        // Add hasUpcomingInspection property to each lead\r\n        const leadsWithInspectionFlag = leadsData?.map(lead => ({\r\n            ...lead,\r\n            hasUpcomingInspection: leadsWithInspections.has(lead.id)\r\n        })) || [];\r\n\r\n        setLeads(leadsWithInspectionFlag);\r\n    } catch (err) {\r\n        console.error('Error fetching leads:', err);\r\n    } finally {\r\n        setLoading(false);\r\n    }\r\n};\r\n\r\n    const filteredLeads = leads.filter(lead => {\r\n        const search = searchQuery.toLowerCase();\r\n        return (\r\n            lead.full_name.toLowerCase().includes(search) ||\r\n            lead.email.toLowerCase().includes(search) ||\r\n            lead.address.toLowerCase().includes(search) ||\r\n            lead.status.toLowerCase().includes(search)\r\n        );\r\n    });\r\n\r\n    if (loading) {\r\n        return <p className=\"text-center py-8\">Loading leads...</p>;\r\n    }\r\n\r\n    return (\r\n        <div>\r\n            {/* Search Bar */}\r\n            <input\r\n                type=\"text\"\r\n                placeholder=\"Search by name, email, address, or status...\"\r\n                value={searchQuery}\r\n                onChange={(e) => setSearchQuery(e.target.value)}\r\n                className=\"w-full p-3 border rounded-lg mb-4\"\r\n            />\r\n\r\n            {/* Leads List */}\r\n            {filteredLeads.length === 0 ? (\r\n                <p className=\"text-center py-8 text-gray-500\">\r\n                    {searchQuery ? 'No leads match your search' : 'No leads yet. Drop some pins on the map!'}\r\n                </p>\r\n            ) : (\r\n                <div className=\"max-h-[500px] overflow-y-auto space-y-3\">\r\n                    {filteredLeads.map((lead) => (\r\n                        <LeadMiniCard\r\n                            key={lead.id}\r\n                            lead={lead}\r\n                            onClick={() => router.push(`/dashboard/leads/${lead.id}`)}\r\n                            hasUpcomingInspection={lead.hasUpcomingInspection} \r\n                        />\r\n                    ))}\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n});\r\n\r\nexport default LeadList;"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1128, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/rober/OneDrive/Desktop/web%20dev%20projects/Roof-Track/src/lib/geocoding.ts"],"sourcesContent":["export async function geocodeAddress(address: string): Promise<{ lat: number; lng: number } | null> {\r\n    try {\r\n        const apiKey = 'AIzaSyBAgEjpI9L3Wu-NJyPv--kzsuPsGx5m7nY';\r\n        const encodedAddress = encodeURIComponent(address);\r\n        \r\n        const response = await fetch(\r\n            `https://maps.googleapis.com/maps/api/geocode/json?address=${encodedAddress}&key=${apiKey}`\r\n        );\r\n        \r\n        const data = await response.json();\r\n        \r\n        if (data.status === 'OK' && data.results.length > 0) {\r\n            const location = data.results[0].geometry.location;\r\n            return {\r\n                lat: location.lat,\r\n                lng: location.lng\r\n            };\r\n        }\r\n        \r\n        console.error('Geocoding failed:', data.status);\r\n        return null;\r\n        \r\n    } catch (error) {\r\n        console.error('Geocoding error:', error);\r\n        return null;\r\n    }\r\n}"],"names":[],"mappings":";;;;AAAO,eAAe,eAAe,OAAe;IAChD,IAAI;QACA,MAAM,SAAS;QACf,MAAM,iBAAiB,mBAAmB;QAE1C,MAAM,WAAW,MAAM,MACnB,CAAC,0DAA0D,EAAE,eAAe,KAAK,EAAE,QAAQ;QAG/F,MAAM,OAAO,MAAM,SAAS,IAAI;QAEhC,IAAI,KAAK,MAAM,KAAK,QAAQ,KAAK,OAAO,CAAC,MAAM,GAAG,GAAG;YACjD,MAAM,WAAW,KAAK,OAAO,CAAC,EAAE,CAAC,QAAQ,CAAC,QAAQ;YAClD,OAAO;gBACH,KAAK,SAAS,GAAG;gBACjB,KAAK,SAAS,GAAG;YACrB;QACJ;QAEA,QAAQ,KAAK,CAAC,qBAAqB,KAAK,MAAM;QAC9C,OAAO;IAEX,EAAE,OAAO,OAAO;QACZ,QAAQ,KAAK,CAAC,oBAAoB;QAClC,OAAO;IACX;AACJ"}},
    {"offset": {"line": 1159, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/rober/OneDrive/Desktop/web%20dev%20projects/Roof-Track/src/components/leads/LeadForm.tsx"],"sourcesContent":["'use client';\r\nimport { useState } from 'react';\r\nimport { createClient } from '@/lib/supabase/client';\r\nimport { LeadStatus } from '@/types/Lead';\r\nimport { geocodeAddress } from '@/lib/geocoding';\r\n\r\ntype LeadFormProps = {\r\n    onSuccess?: () => void;\r\n};\r\n\r\nexport default function LeadForm({ onSuccess }: LeadFormProps) {\r\n    const [fullName, setFullName] = useState('');\r\n    const [email, setEmail] = useState('');\r\n    const [phoneNumber, setPhoneNumber] = useState('');\r\n    const [address, setAddress] = useState('');\r\n    const [status, setStatus] = useState<LeadStatus>('not contacted');\r\n    const [preferredContactMethod, setPreferredContactMethod] = useState<'email' | 'phone' | 'none'>('none');\r\n    const [notes, setNotes] = useState('');\r\n    const [loading, setLoading] = useState(false);\r\n    const [addressValid, setAddressValid] = useState<boolean | null>(null);\r\n\r\n    const handleSubmit = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    setLoading(true);\r\n\r\n    try {\r\n        // 1. Geocode the address first\r\n        const coordinates = await geocodeAddress(address);\r\n        \r\n        if (!coordinates) {\r\n            alert('Could not find coordinates for this address. Please check the address and try again.');\r\n            setLoading(false);\r\n            return;\r\n        }\r\n\r\n        // 2. Create the lead with coordinates\r\n        const supabase = createClient();\r\n        const { data: { user } } = await supabase.auth.getUser();\r\n        \r\n        if (!user) {\r\n            alert('You must be logged in');\r\n            return;\r\n        }\r\n\r\n        const { data: profile } = await supabase\r\n            .from('profiles')\r\n            .select('company_id')\r\n            .eq('id', user.id)\r\n            .single();\r\n\r\n        const { error } = await supabase\r\n            .from('leads')\r\n            .insert([{\r\n                company_id: profile?.company_id,\r\n                user_id: user.id,\r\n                full_name: fullName,\r\n                email,\r\n                phone_number: phoneNumber,\r\n                address,\r\n                status,\r\n                latitude: coordinates.lat,      // ‚Üê ADD THIS\r\n                longitude: coordinates.lng,     // ‚Üê ADD THIS\r\n                preferred_contact_method: preferredContactMethod,\r\n                notes,\r\n            }]);\r\n\r\n        if (error) throw error;\r\n\r\n        alert('Lead created successfully!');\r\n        \r\n        // Reset form\r\n        setFullName('');\r\n        setEmail('');\r\n        setPhoneNumber('');\r\n        setAddress('');\r\n        setStatus('not contacted');\r\n        setPreferredContactMethod('none');\r\n        setNotes('');\r\n\r\n        onSuccess?.();\r\n\r\n    } catch (err: any) {\r\n        alert('Failed to create lead: ' + err.message);\r\n    } finally {\r\n        setLoading(false);\r\n    }\r\n};\r\n\r\nconst validateAddress = async () => {\r\n    if (!address || address.length < 5) {\r\n        setAddressValid(null);\r\n        return;\r\n    }\r\n\r\n    const coords = await geocodeAddress(address);\r\n    setAddressValid(coords !== null);\r\n};\r\n            \r\n    return (\r\n        <form onSubmit={handleSubmit} className=\"space-y-4 max-w-2xl\">\r\n            <div>\r\n                <label className=\"block text-sm font-medium mb-1\">Full Name *</label>\r\n                <input\r\n                    type=\"text\"\r\n                    value={fullName}\r\n                    onChange={(e) => setFullName(e.target.value)}\r\n                    className=\"w-full p-3 border rounded-lg\"\r\n                    required\r\n                />\r\n            </div>\r\n\r\n            <div>\r\n                <label className=\"block text-sm font-medium mb-1\">Email *</label>\r\n                <input\r\n                    type=\"email\"\r\n                    value={email}\r\n                    onChange={(e) => setEmail(e.target.value)}\r\n                    className=\"w-full p-3 border rounded-lg\"\r\n                    required\r\n                />\r\n            </div>\r\n\r\n            <div>\r\n                <label className=\"block text-sm font-medium mb-1\">Phone Number *</label>\r\n                <input\r\n                    type=\"tel\"\r\n                    value={phoneNumber}\r\n                    onChange={(e) => setPhoneNumber(e.target.value)}\r\n                    className=\"w-full p-3 border rounded-lg\"\r\n                    required\r\n                />\r\n            </div>\r\n\r\n            <div>\r\n    <label className=\"block text-sm font-medium mb-1\">Address *</label>\r\n    <input\r\n        type=\"text\"\r\n        value={address}\r\n        onChange={(e) => setAddress(e.target.value)}\r\n        onBlur={validateAddress}  // ‚Üê Validate when user leaves field\r\n        className={`w-full p-3 border rounded-lg ${\r\n            addressValid === false ? 'border-red-500' : \r\n            addressValid === true ? 'border-green-500' : \r\n            'border-gray-300'\r\n        }`}\r\n        required\r\n        placeholder=\"123 Main St, City, State ZIP\"\r\n    />\r\n    {addressValid === false && (\r\n        <p className=\"text-red-500 text-sm mt-1\">\r\n            ‚ö†Ô∏è Could not validate this address. Please check and try again.\r\n        </p>\r\n    )}\r\n    {addressValid === true && (\r\n        <p className=\"text-green-500 text-sm mt-1\">\r\n            ‚úì Address validated\r\n        </p>\r\n    )}\r\n</div>\r\n\r\n            <div>\r\n                <label className=\"block text-sm font-medium mb-1\">Initial Status</label>\r\n                <select\r\n                    value={status}\r\n                    onChange={(e) => setStatus(e.target.value as LeadStatus)}\r\n                    className=\"w-full p-3 border rounded-lg\"\r\n                >\r\n                    <option value=\"not contacted\">Not Contacted</option>\r\n                    <option value=\"contacted\">Contacted</option>\r\n                    <option value=\"inspection\">Inspection</option>\r\n                    <option value=\"damages\">Damages</option>\r\n                    <option value=\"follow up\">Follow Up</option>\r\n                </select>\r\n            </div>\r\n\r\n            <div>\r\n                <label className=\"block text-sm font-medium mb-1\">Preferred Contact Method</label>\r\n                <select\r\n                    value={preferredContactMethod}\r\n                    onChange={(e) => setPreferredContactMethod(e.target.value as 'email' | 'phone' | 'none')}\r\n                    className=\"w-full p-3 border rounded-lg\"\r\n                >\r\n                    <option value=\"none\">None</option>\r\n                    <option value=\"email\">Email</option>\r\n                    <option value=\"phone\">Phone</option>\r\n                </select>\r\n            </div>\r\n\r\n            <div>\r\n                <label className=\"block text-sm font-medium mb-1\">Notes</label>\r\n                <textarea\r\n                    value={notes}\r\n                    onChange={(e) => setNotes(e.target.value)}\r\n                    className=\"w-full p-3 border rounded-lg\"\r\n                    rows={4}\r\n                    placeholder=\"Any additional information about this lead...\"\r\n                />\r\n            </div>\r\n\r\n            <button\r\n                type=\"submit\"\r\n                disabled={loading}\r\n                className=\"w-full bg-indigo-900 text-white py-3 px-4 rounded-lg hover:bg-indigo-800 transition-colors font-semibold disabled:opacity-50 disabled:cursor-not-allowed\"\r\n            >\r\n                {loading ? 'Creating Lead...' : 'Create Lead'}\r\n            </button>\r\n        </form>\r\n    );\r\n}"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1546, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/rober/OneDrive/Desktop/web%20dev%20projects/Roof-Track/src/lib/utils.ts"],"sourcesContent":["import { clsx, type ClassValue } from \"clsx\"\nimport { twMerge } from \"tailwind-merge\"\n\nexport function cn(...inputs: ClassValue[]) {\n  return twMerge(clsx(inputs))\n}\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAEO,SAAS,GAAG,GAAG,MAAoB;IACxC,OAAO,IAAA,yKAAO,EAAC,IAAA,gJAAI,EAAC;AACtB"}},
    {"offset": {"line": 1564, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/rober/OneDrive/Desktop/web%20dev%20projects/Roof-Track/src/components/ui/button.tsx"],"sourcesContent":["import * as React from \"react\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\nimport { Slot } from \"radix-ui\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst buttonVariants = cva(\n  \"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-primary text-primary-foreground hover:bg-primary/90\",\n        destructive:\n          \"bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60\",\n        outline:\n          \"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50\",\n        secondary:\n          \"bg-secondary text-secondary-foreground hover:bg-secondary/80\",\n        ghost:\n          \"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50\",\n        link: \"text-primary underline-offset-4 hover:underline\",\n      },\n      size: {\n        default: \"h-9 px-4 py-2 has-[>svg]:px-3\",\n        xs: \"h-6 gap-1 rounded-md px-2 text-xs has-[>svg]:px-1.5 [&_svg:not([class*='size-'])]:size-3\",\n        sm: \"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5\",\n        lg: \"h-10 rounded-md px-6 has-[>svg]:px-4\",\n        icon: \"size-9\",\n        \"icon-xs\": \"size-6 rounded-md [&_svg:not([class*='size-'])]:size-3\",\n        \"icon-sm\": \"size-8\",\n        \"icon-lg\": \"size-10\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  }\n)\n\nfunction Button({\n  className,\n  variant = \"default\",\n  size = \"default\",\n  asChild = false,\n  ...props\n}: React.ComponentProps<\"button\"> &\n  VariantProps<typeof buttonVariants> & {\n    asChild?: boolean\n  }) {\n  const Comp = asChild ? Slot.Root : \"button\"\n\n  return (\n    <Comp\n      data-slot=\"button\"\n      data-variant={variant}\n      data-size={size}\n      className={cn(buttonVariants({ variant, size, className }))}\n      {...props}\n    />\n  )\n}\n\nexport { Button, buttonVariants }\n"],"names":[],"mappings":";;;;;;;AACA;AACA;AAEA;;;;;AAEA,MAAM,iBAAiB,IAAA,0KAAG,EACxB,+bACA;IACE,UAAU;QACR,SAAS;YACP,SAAS;YACT,aACE;YACF,SACE;YACF,WACE;YACF,OACE;YACF,MAAM;QACR;QACA,MAAM;YACJ,SAAS;YACT,IAAI;YACJ,IAAI;YACJ,IAAI;YACJ,MAAM;YACN,WAAW;YACX,WAAW;YACX,WAAW;QACb;IACF;IACA,iBAAiB;QACf,SAAS;QACT,MAAM;IACR;AACF;AAGF,SAAS,OAAO,EACd,SAAS,EACT,UAAU,SAAS,EACnB,OAAO,SAAS,EAChB,UAAU,KAAK,EACf,GAAG,OAIF;IACD,MAAM,OAAO,UAAU,2MAAI,CAAC,IAAI,GAAG;IAEnC,qBACE,6LAAC;QACC,aAAU;QACV,gBAAc;QACd,aAAW;QACX,WAAW,IAAA,4HAAE,EAAC,eAAe;YAAE;YAAS;YAAM;QAAU;QACvD,GAAG,KAAK;;;;;;AAGf;KArBS"}},
    {"offset": {"line": 1633, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/rober/OneDrive/Desktop/web%20dev%20projects/Roof-Track/src/components/inspections/InspectionMiniCard.tsx"],"sourcesContent":["'use client';\r\nimport type { Inspection } from '@/types/Inspection';\r\n\r\ntype InspectionMiniCardProps = {\r\n  inspection: Inspection & {\r\n    lead_name: string;\r\n    lead_address: string;\r\n  };\r\n  onClick: () => void;\r\n};\r\n\r\nexport default function InspectionMiniCard({ inspection, onClick }: InspectionMiniCardProps) {\r\n  const statusColors = {\r\n    scheduled: '#3b82f6',  // blue\r\n    completed: '#10b981',  // green\r\n    canceled: '#6b7280',   // gray\r\n  };\r\n\r\n  const formatDate = (dateStr: string) => {\r\n    return new Date(dateStr).toLocaleDateString('en-US', { \r\n      weekday: 'short', \r\n      month: 'short', \r\n      day: 'numeric' \r\n    });\r\n  };\r\n\r\n  const formatTime = (timeStr: string) => {\r\n    const [hours, minutes] = timeStr.split(':');\r\n    const hour = parseInt(hours);\r\n    const ampm = hour >= 12 ? 'PM' : 'AM';\r\n    const displayHour = hour % 12 || 12;\r\n    return `${displayHour}:${minutes} ${ampm}`;\r\n  };\r\n\r\n  return (\r\n    <div\r\n      onClick={onClick}\r\n      className=\"border rounded-lg p-4 hover:shadow-lg transition-shadow cursor-pointer bg-white\"\r\n    >\r\n      <div className=\"flex justify-between items-start mb-2\">\r\n        <div>\r\n          <h3 className=\"font-bold text-lg\">{inspection.lead_name}</h3>\r\n          <p className=\"text-sm text-gray-600\">üìç {inspection.lead_address}</p>\r\n        </div>\r\n        <span\r\n          className=\"px-3 py-1 rounded-full text-xs font-semibold text-white capitalize\"\r\n          style={{ backgroundColor: statusColors[inspection.status] }}\r\n        >\r\n          {inspection.status}\r\n        </span>\r\n      </div>\r\n\r\n      <div className=\"flex gap-4 text-sm text-gray-700 mt-3\">\r\n        <div>\r\n          <span className=\"font-semibold\">üìÖ {formatDate(inspection.scheduled_date)}</span>\r\n        </div>\r\n        <div>\r\n          <span className=\"font-semibold\">üïê {formatTime(inspection.scheduled_time)}</span>\r\n        </div>\r\n      </div>\r\n\r\n      {inspection.notes && (\r\n        <p className=\"text-sm text-gray-600 mt-2 italic\">\r\n          Note: {inspection.notes}\r\n        </p>\r\n      )}\r\n    </div>\r\n  );\r\n}"],"names":[],"mappings":";;;;;AAAA;;AAWe,SAAS,mBAAmB,EAAE,UAAU,EAAE,OAAO,EAA2B;IACzF,MAAM,eAAe;QACnB,WAAW;QACX,WAAW;QACX,UAAU;IACZ;IAEA,MAAM,aAAa,CAAC;QAClB,OAAO,IAAI,KAAK,SAAS,kBAAkB,CAAC,SAAS;YACnD,SAAS;YACT,OAAO;YACP,KAAK;QACP;IACF;IAEA,MAAM,aAAa,CAAC;QAClB,MAAM,CAAC,OAAO,QAAQ,GAAG,QAAQ,KAAK,CAAC;QACvC,MAAM,OAAO,SAAS;QACtB,MAAM,OAAO,QAAQ,KAAK,OAAO;QACjC,MAAM,cAAc,OAAO,MAAM;QACjC,OAAO,GAAG,YAAY,CAAC,EAAE,QAAQ,CAAC,EAAE,MAAM;IAC5C;IAEA,qBACE,6LAAC;QACC,SAAS;QACT,WAAU;;0BAEV,6LAAC;gBAAI,WAAU;;kCACb,6LAAC;;0CACC,6LAAC;gCAAG,WAAU;0CAAqB,WAAW,SAAS;;;;;;0CACvD,6LAAC;gCAAE,WAAU;;oCAAwB;oCAAI,WAAW,YAAY;;;;;;;;;;;;;kCAElE,6LAAC;wBACC,WAAU;wBACV,OAAO;4BAAE,iBAAiB,YAAY,CAAC,WAAW,MAAM,CAAC;wBAAC;kCAEzD,WAAW,MAAM;;;;;;;;;;;;0BAItB,6LAAC;gBAAI,WAAU;;kCACb,6LAAC;kCACC,cAAA,6LAAC;4BAAK,WAAU;;gCAAgB;gCAAI,WAAW,WAAW,cAAc;;;;;;;;;;;;kCAE1E,6LAAC;kCACC,cAAA,6LAAC;4BAAK,WAAU;;gCAAgB;gCAAI,WAAW,WAAW,cAAc;;;;;;;;;;;;;;;;;;YAI3E,WAAW,KAAK,kBACf,6LAAC;gBAAE,WAAU;;oBAAoC;oBACxC,WAAW,KAAK;;;;;;;;;;;;;AAKjC;KAzDwB"}},
    {"offset": {"line": 1782, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/rober/OneDrive/Desktop/web%20dev%20projects/Roof-Track/src/components/inspections/InspectionList.tsx"],"sourcesContent":["'use client';\r\nimport { useState, useEffect } from 'react';\r\nimport { useRouter } from 'next/navigation';\r\nimport { createClient } from '@/lib/supabase/client';\r\nimport type { Inspection } from '@/types/Inspection';\r\nimport InspectionMiniCard from './InspectionMiniCard';\r\n\r\nexport default function InspectionList() {\r\n  const router = useRouter();\r\n  const [inspections, setInspections] = useState<any[]>([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [filter, setFilter] = useState<'all' | 'scheduled' | 'completed'>('all');\r\n\r\n  useEffect(() => {\r\n    fetchInspections();\r\n  }, []);\r\n\r\n  const fetchInspections = async () => {\r\n    try {\r\n      const supabase = createClient();\r\n      const { data: { user } } = await supabase.auth.getUser();\r\n\r\n      if (!user) {\r\n        setLoading(false);\r\n        return;\r\n      }\r\n\r\n      const { data: profile } = await supabase\r\n        .from('profiles')\r\n        .select('company_id')\r\n        .eq('id', user.id)\r\n        .single();\r\n\r\n      // Fetch inspections with lead data (join)\r\n      const { data: inspectionsData, error } = await supabase\r\n        .from('inspections')\r\n        .select(`\r\n          *,\r\n          leads (\r\n            full_name,\r\n            address\r\n          )\r\n        `)\r\n        .eq('company_id', profile?.company_id)\r\n        .order('scheduled_date', { ascending: true })\r\n        .order('scheduled_time', { ascending: true });\r\n\r\n      if (error) throw error;\r\n\r\n      // Flatten the joined data\r\n      const formatted = inspectionsData?.map(insp => ({\r\n        ...insp,\r\n        lead_name: insp.leads?.full_name || 'Unknown',\r\n        lead_address: insp.leads?.address || 'No address',\r\n      })) || [];\r\n\r\n      setInspections(formatted);\r\n    } catch (err) {\r\n      console.error('Error fetching inspections:', err);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const filteredInspections = inspections.filter(insp => {\r\n    if (filter === 'all') return true;\r\n    return insp.status === filter;\r\n  });\r\n\r\n  // Separate upcoming vs past\r\n  const today = new Date().toISOString().split('T')[0];\r\n  const upcoming = filteredInspections.filter(insp => insp.scheduled_date >= today);\r\n  const past = filteredInspections.filter(insp => insp.scheduled_date < today);\r\n\r\n  if (loading) {\r\n    return <p className=\"text-center py-8\">Loading inspections...</p>;\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      {/* Filter Buttons */}\r\n      <div className=\"flex gap-2 mb-6\">\r\n        <button\r\n          onClick={() => setFilter('all')}\r\n          className={`px-4 py-2 rounded ${\r\n            filter === 'all'\r\n              ? 'bg-indigo-900 text-white'\r\n              : 'bg-gray-200 text-gray-700 hover:bg-gray-300'\r\n          }`}\r\n        >\r\n          All ({inspections.length})\r\n        </button>\r\n        <button\r\n          onClick={() => setFilter('scheduled')}\r\n          className={`px-4 py-2 rounded ${\r\n            filter === 'scheduled'\r\n              ? 'bg-blue-600 text-white'\r\n              : 'bg-gray-200 text-gray-700 hover:bg-gray-300'\r\n          }`}\r\n        >\r\n          Scheduled ({inspections.filter(i => i.status === 'scheduled').length})\r\n        </button>\r\n        <button\r\n          onClick={() => setFilter('completed')}\r\n          className={`px-4 py-2 rounded ${\r\n            filter === 'completed'\r\n              ? 'bg-green-600 text-white'\r\n              : 'bg-gray-200 text-gray-700 hover:bg-gray-300'\r\n          }`}\r\n        >\r\n          Completed ({inspections.filter(i => i.status === 'completed').length})\r\n        </button>\r\n      </div>\r\n\r\n      {/* Upcoming Inspections */}\r\n      {upcoming.length > 0 && (\r\n        <div className=\"mb-6\">\r\n          <h3 className=\"text-lg font-bold mb-3\">üìÖ Upcoming</h3>\r\n          <div className=\"space-y-3\">\r\n            {upcoming.map((inspection) => (\r\n              <InspectionMiniCard\r\n                key={inspection.id}\r\n                inspection={inspection}\r\n                onClick={() => router.push(`/dashboard/leads/${inspection.lead_id}`)}\r\n              />\r\n            ))}\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Past Inspections */}\r\n      {past.length > 0 && (\r\n        <div>\r\n          <h3 className=\"text-lg font-bold mb-3\">üìã Past</h3>\r\n          <div className=\"space-y-3\">\r\n            {past.map((inspection) => (\r\n              <InspectionMiniCard\r\n                key={inspection.id}\r\n                inspection={inspection}\r\n                onClick={() => router.push(`/dashboard/leads/${inspection.lead_id}`)}\r\n              />\r\n            ))}\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Empty State */}\r\n      {filteredInspections.length === 0 && (\r\n        <p className=\"text-center py-8 text-gray-500\">\r\n          No {filter !== 'all' ? filter : ''} inspections found.\r\n          Schedule one from a lead's detail page!\r\n        </p>\r\n      )}\r\n    </div>\r\n  );\r\n}"],"names":[],"mappings":"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"}},
    {"offset": {"line": 2009, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/rober/OneDrive/Desktop/web%20dev%20projects/Roof-Track/src/app/dashboard/leads/page.tsx"],"sourcesContent":["'use client';\r\nimport { useState } from 'react';\r\nimport { useRouter } from 'next/navigation';\r\nimport TerritoryMap from '@/components/territoryMap';\r\nimport LeadList from '@/components/leads/LeadList';\r\nimport LeadForm from '@/components/leads/LeadForm';\r\nimport { Button } from '@/components/ui/button';\r\nimport InspectionList from '@/components/inspections/InspectionList';\r\n\r\nexport default function LeadsPage() {\r\n    const router = useRouter();\r\n    const [activeTab, setActiveTab] = useState('canvassing');\r\n    \r\n    const tabs = [\r\n        { id: 'canvassing', label: 'Door Knocking' },\r\n        { id: 'leads', label: 'Leads List' },\r\n        { id: 'inspections', label: 'Inspections' },\r\n    ];\r\n\r\n    return (\r\n        <div className=\"w-full max-w-6xl mx-auto mt-8 p-4\">\r\n            {/* Main Tab Buttons */}\r\n            <div className=\"flex border-b border-gray-200\">\r\n                {tabs.map((tab) => (\r\n                    <button\r\n                        key={tab.id}\r\n                        onClick={() => setActiveTab(tab.id)}\r\n                        className={`px-6 py-3 font-semibold rounded-t transition-all ${\r\n                            activeTab === tab.id \r\n                                ? 'bg-indigo-900 text-white' \r\n                                : 'bg-gray-200 hover:bg-gray-300 text-gray-700'\r\n                        }`}\r\n                    >\r\n                        {tab.label}\r\n                    </button>\r\n                ))}\r\n            </div>\r\n\r\n            {/* Tab Content */}\r\n            <div className=\"border border-gray-200 p-6 bg-white rounded-b-lg\">\r\n                {activeTab === 'canvassing' && <CanvassingTab router={router} />}\r\n                {activeTab === 'leads' && <LeadsTab />}\r\n                {activeTab === 'inspections' && <InspectionsTab />}\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nfunction CanvassingTab({ router }: { router: any }) {\r\n    return (\r\n        <div>\r\n            <div className=\"mb-4\">\r\n                <Button \r\n                    variant=\"outline\" \r\n                    onClick={() => router.push('/dashboard/territoryManagement')}\r\n                    className=\"text-lg\"\r\n                >\r\n                    üó∫Ô∏è Open Full Territory Map\r\n                </Button>\r\n            </div>\r\n            <p className=\"text-gray-600 mb-4\">\r\n                View your dropped pins below or open the full map for better visibility\r\n            </p>\r\n            <TerritoryMap />\r\n        </div>\r\n    );\r\n}\r\n\r\nfunction LeadsTab() {\r\n    const [subTab, setSubTab] = useState('view');\r\n\r\n    return (\r\n        <div>\r\n            {/* Sub-tabs */}\r\n            <div className=\"flex gap-2 mb-6\">\r\n                <button\r\n                    onClick={() => setSubTab('view')}\r\n                    className={`px-4 py-2 rounded transition-all ${\r\n                        subTab === 'view'\r\n                            ? 'bg-indigo-900 text-white'\r\n                            : 'bg-gray-200 text-gray-700 hover:bg-gray-300'\r\n                    }`}\r\n                >\r\n                    üìã View Leads\r\n                </button>\r\n                <button\r\n                    onClick={() => setSubTab('add')}\r\n                    className={`px-4 py-2 rounded transition-all ${\r\n                        subTab === 'add'\r\n                            ? 'bg-indigo-900 text-white'\r\n                            : 'bg-gray-200 text-gray-700 hover:bg-gray-300'\r\n                    }`}\r\n                >\r\n                    ‚ûï Add New Lead\r\n                </button>\r\n            </div>\r\n\r\n            {/* Sub-tab Content */}\r\n            {subTab === 'view' && <LeadList />}\r\n            {subTab === 'add' && <LeadForm onSuccess={() => setSubTab('view')} />}\r\n        </div>\r\n    );\r\n}\r\n\r\nfunction InspectionsTab() {\r\n    return (\r\n        <div>\r\n            <h2 className=\"text-2xl font-bold mb-6\">üìÖ Inspections</h2>\r\n            <InspectionList />\r\n        </div>\r\n    );\r\n}"],"names":[],"mappings":";;;;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAPA;;;;;;;;AASe,SAAS;;IACpB,MAAM,SAAS,IAAA,kJAAS;IACxB,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,yKAAQ,EAAC;IAE3C,MAAM,OAAO;QACT;YAAE,IAAI;YAAc,OAAO;QAAgB;QAC3C;YAAE,IAAI;YAAS,OAAO;QAAa;QACnC;YAAE,IAAI;YAAe,OAAO;QAAc;KAC7C;IAED,qBACI,6LAAC;QAAI,WAAU;;0BAEX,6LAAC;gBAAI,WAAU;0BACV,KAAK,GAAG,CAAC,CAAC,oBACP,6LAAC;wBAEG,SAAS,IAAM,aAAa,IAAI,EAAE;wBAClC,WAAW,CAAC,iDAAiD,EACzD,cAAc,IAAI,EAAE,GACd,6BACA,+CACR;kCAED,IAAI,KAAK;uBARL,IAAI,EAAE;;;;;;;;;;0BAcvB,6LAAC;gBAAI,WAAU;;oBACV,cAAc,8BAAgB,6LAAC;wBAAc,QAAQ;;;;;;oBACrD,cAAc,yBAAW,6LAAC;;;;;oBAC1B,cAAc,+BAAiB,6LAAC;;;;;;;;;;;;;;;;;AAIjD;GArCwB;;QACL,kJAAS;;;KADJ;AAuCxB,SAAS,cAAc,EAAE,MAAM,EAAmB;IAC9C,qBACI,6LAAC;;0BACG,6LAAC;gBAAI,WAAU;0BACX,cAAA,6LAAC,+IAAM;oBACH,SAAQ;oBACR,SAAS,IAAM,OAAO,IAAI,CAAC;oBAC3B,WAAU;8BACb;;;;;;;;;;;0BAIL,6LAAC;gBAAE,WAAU;0BAAqB;;;;;;0BAGlC,6LAAC,gJAAY;;;;;;;;;;;AAGzB;MAlBS;AAoBT,SAAS;;IACL,MAAM,CAAC,QAAQ,UAAU,GAAG,IAAA,yKAAQ,EAAC;IAErC,qBACI,6LAAC;;0BAEG,6LAAC;gBAAI,WAAU;;kCACX,6LAAC;wBACG,SAAS,IAAM,UAAU;wBACzB,WAAW,CAAC,iCAAiC,EACzC,WAAW,SACL,6BACA,+CACR;kCACL;;;;;;kCAGD,6LAAC;wBACG,SAAS,IAAM,UAAU;wBACzB,WAAW,CAAC,iCAAiC,EACzC,WAAW,QACL,6BACA,+CACR;kCACL;;;;;;;;;;;;YAMJ,WAAW,wBAAU,6LAAC,qJAAQ;;;;;YAC9B,WAAW,uBAAS,6LAAC,qJAAQ;gBAAC,WAAW,IAAM,UAAU;;;;;;;;;;;;AAGtE;IAlCS;MAAA;AAoCT,SAAS;IACL,qBACI,6LAAC;;0BACG,6LAAC;gBAAG,WAAU;0BAA0B;;;;;;0BACxC,6LAAC,iKAAc;;;;;;;;;;;AAG3B;MAPS"}}]
}