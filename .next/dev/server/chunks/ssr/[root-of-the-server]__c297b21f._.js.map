{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 28, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/rober/OneDrive/Desktop/web%20dev%20projects/Roof-Track/src/lib/supabase/client.ts"],"sourcesContent":["import { createBrowserClient } from '@supabase/ssr';\n\nconst supabaseUrl = process.env.NEXT_PUBLIC_SUPABASE_URL ?? 'https://ixfuxlkefhujvlubwvbl.supabase.co';\nconst supabaseAnonKey = process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY ?? 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Iml4ZnV4bGtlZmh1anZsdWJ3dmJsIiwicm9sZSI6ImFub24iLCJpYXQiOjE3Njk3MjgxOTcsImV4cCI6MjA4NTMwNDE5N30.VTjmyqeRlYmk-VOES8bidCO7tiXv4XePHesjwHjZH_U';\n\nexport function createClient() {\n  return createBrowserClient(supabaseUrl, supabaseAnonKey);\n}\n"],"names":[],"mappings":";;;;AAAA;AAAA;;AAEA,MAAM,cAAc,QAAQ,GAAG,CAAC,wBAAwB,IAAI;AAC5D,MAAM,kBAAkB,QAAQ,GAAG,CAAC,6BAA6B,IAAI;AAE9D,SAAS;IACd,OAAO,IAAA,iMAAmB,EAAC,aAAa;AAC1C"}},
    {"offset": {"line": 44, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/rober/OneDrive/Desktop/web%20dev%20projects/Roof-Track/src/components/Header.tsx"],"sourcesContent":["'use client';\r\nimport { useEffect, useState } from 'react';\r\nimport { useRouter, usePathname } from 'next/navigation';\r\nimport { createClient } from '@/lib/supabase/client';\r\n\r\nexport default function Header() {\r\n    const router = useRouter();\r\n    const pathname = usePathname();\r\n    const [user, setUser] = useState<any>(null);\r\n    const [profile, setProfile] = useState<any>(null);\r\n    const [loading, setLoading] = useState(true);\r\n\r\n    useEffect(() => {\r\n        fetchUser();\r\n\r\n        // Listen for auth state changes\r\n    const supabase = createClient();\r\n    const { data: { subscription } } = supabase.auth.onAuthStateChange((event, session) => {\r\n        if (event === 'SIGNED_IN') {\r\n            fetchUser();\r\n        } else if (event === 'SIGNED_OUT') {\r\n            setUser(null);\r\n            setProfile(null);\r\n        }\r\n    });\r\n\r\n    return () => {\r\n        subscription.unsubscribe();\r\n    };\r\n}, []);\r\n\r\n    const fetchUser = async () => {\r\n        const supabase = createClient();\r\n        const { data: { user } } = await supabase.auth.getUser();\r\n        \r\n        if (user) {\r\n            setUser(user);\r\n            \r\n            const { data: profileData } = await supabase\r\n                .from('profiles')\r\n                .select('full_name, role')\r\n                .eq('id', user.id)\r\n                .single();\r\n            \r\n            setProfile(profileData);\r\n        }\r\n        setLoading(false);\r\n    };\r\n\r\n    const handleLogout = async () => {\r\n        const supabase = createClient();\r\n        await supabase.auth.signOut();\r\n        setUser(null);\r\n        setProfile(null);\r\n        router.push('/');\r\n    };\r\n\r\n    const isActive = (path: string) => {\r\n        return pathname === path;\r\n    };\r\n\r\n    // Hide header completely on login/signup pages\r\n    if (pathname === '/login' || pathname === '/signup') {\r\n        return null;\r\n    }\r\n\r\n    // Show loading state briefly\r\n    if (loading) {\r\n        return (\r\n            <header className=\"bg-gradient-to-r from-indigo-900 via-indigo-800 to-indigo-900 shadow-lg sticky top-0 z-50\">\r\n                <div className=\"max-w-7xl mx-auto px-6 py-4\">\r\n                    <div className=\"flex justify-between items-center\">\r\n                        <img \r\n                            src=\"/RoofTrack2.png\" \r\n                            alt=\"RoofStack Logo\" \r\n                            className=\"h-16 w-auto object-contain\"\r\n                        />\r\n                    </div>\r\n                </div>\r\n            </header>\r\n        );\r\n    }\r\n\r\n    return (\r\n        <header className=\"bg-gradient-to-r from-indigo-900 via-indigo-800 to-indigo-900 shadow-lg sticky top-0 z-50\">\r\n            <div className=\"max-w-7xl mx-auto px-6 py-4\">\r\n                <div className=\"flex justify-between items-center\">\r\n                    {/* Logo */}\r\n                    <button\r\n                        onClick={() => router.push(user ? '/dashboard' : '/')}\r\n                        className=\"transition-transform hover:scale-105 border-0 bg-transparent p-0 focus:outline-none\"\r\n                    >\r\n                        <img \r\n                            src=\"/RoofTrack2.png\" \r\n                            alt=\"RoofStack Logo\" \r\n                            className=\"h-16 w-auto object-contain\"\r\n                        />\r\n                    </button>\r\n\r\n                    {/* Conditional Navigation */}\r\n                    {user ? (\r\n                        /* Authenticated - Full Navigation */\r\n                        <nav className=\"flex items-center gap-2\">\r\n                            <button\r\n                                onClick={() => router.push('/dashboard')}\r\n                                className={`px-4 py-2 rounded-lg font-medium transition-all ${\r\n                                    isActive('/dashboard')\r\n                                        ? 'bg-white text-indigo-900 shadow-md'\r\n                                        : 'text-white hover:bg-indigo-700'\r\n                                }`}\r\n                            >\r\n                                Dashboard\r\n                            </button>\r\n                            <button\r\n                                onClick={() => router.push('/dashboard/leads')}\r\n                                className={`px-4 py-2 rounded-lg font-medium transition-all ${\r\n                                    pathname?.startsWith('/dashboard/leads')\r\n                                        ? 'bg-white text-indigo-900 shadow-md'\r\n                                        : 'text-white hover:bg-indigo-700'\r\n                                }`}\r\n                            >\r\n                                Leads\r\n                            </button>\r\n                            <button\r\n                                onClick={() => router.push('/dashboard/territoryManagement')}\r\n                                className={`px-4 py-2 rounded-lg font-medium transition-all ${\r\n                                    isActive('/dashboard/territoryManagement')\r\n                                        ? 'bg-white text-indigo-900 shadow-md'\r\n                                        : 'text-white hover:bg-indigo-700'\r\n                                }`}\r\n                            >\r\n                                Territory\r\n                            </button>\r\n\r\n                            {/* User Info */}\r\n                            <div className=\"ml-4 pl-4 border-l border-indigo-600\">\r\n                                <div className=\"flex items-center gap-3\">\r\n                                    <div className=\"text-right\">\r\n                                        <p className=\"text-sm font-medium text-white\">\r\n                                            {profile?.full_name || 'User'}\r\n                                        </p>\r\n                                        <p className=\"text-xs text-indigo-200 capitalize\">\r\n                                            {profile?.role || 'rep'}\r\n                                        </p>\r\n                                    </div>\r\n                                    <button\r\n                                        onClick={handleLogout}\r\n                                        className=\"px-4 py-2 bg-red-600 text-white rounded-lg font-medium hover:bg-red-700 transition-all hover:shadow-lg\"\r\n                                    >\r\n                                        Logout\r\n                                    </button>\r\n                                </div>\r\n                            </div>\r\n                        </nav>\r\n                    ) : (\r\n                        /* Public - Login Only */\r\n                        <nav className=\"flex items-center gap-3\">\r\n                            <button\r\n                                onClick={() => router.push('/login')}\r\n                                className=\"px-6 py-2 text-white font-medium hover:text-yellow-200 transition-all\"\r\n                            >\r\n                                Login\r\n                            </button>\r\n                            <button\r\n                                onClick={() => router.push('/signup')}\r\n                                className=\"px-6 py-2 bg-yellow-400 text-indigo-900 font-bold rounded-lg hover:bg-yellow-300 transition-all hover:shadow-lg\"\r\n                            >\r\n                                Get Started\r\n                            </button>\r\n                        </nav>\r\n                    )}\r\n                </div>\r\n            </div>\r\n        </header>\r\n    );\r\n}"],"names":[],"mappings":";;;;;AACA;AACA;AACA;AAHA;;;;;AAKe,SAAS;IACpB,MAAM,SAAS,IAAA,+IAAS;IACxB,MAAM,WAAW,IAAA,iJAAW;IAC5B,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,iNAAQ,EAAM;IACtC,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,iNAAQ,EAAM;IAC5C,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,iNAAQ,EAAC;IAEvC,IAAA,kNAAS,EAAC;QACN;QAEA,gCAAgC;QACpC,MAAM,WAAW,IAAA,gJAAY;QAC7B,MAAM,EAAE,MAAM,EAAE,YAAY,EAAE,EAAE,GAAG,SAAS,IAAI,CAAC,iBAAiB,CAAC,CAAC,OAAO;YACvE,IAAI,UAAU,aAAa;gBACvB;YACJ,OAAO,IAAI,UAAU,cAAc;gBAC/B,QAAQ;gBACR,WAAW;YACf;QACJ;QAEA,OAAO;YACH,aAAa,WAAW;QAC5B;IACJ,GAAG,EAAE;IAED,MAAM,YAAY;QACd,MAAM,WAAW,IAAA,gJAAY;QAC7B,MAAM,EAAE,MAAM,EAAE,IAAI,EAAE,EAAE,GAAG,MAAM,SAAS,IAAI,CAAC,OAAO;QAEtD,IAAI,MAAM;YACN,QAAQ;YAER,MAAM,EAAE,MAAM,WAAW,EAAE,GAAG,MAAM,SAC/B,IAAI,CAAC,YACL,MAAM,CAAC,mBACP,EAAE,CAAC,MAAM,KAAK,EAAE,EAChB,MAAM;YAEX,WAAW;QACf;QACA,WAAW;IACf;IAEA,MAAM,eAAe;QACjB,MAAM,WAAW,IAAA,gJAAY;QAC7B,MAAM,SAAS,IAAI,CAAC,OAAO;QAC3B,QAAQ;QACR,WAAW;QACX,OAAO,IAAI,CAAC;IAChB;IAEA,MAAM,WAAW,CAAC;QACd,OAAO,aAAa;IACxB;IAEA,+CAA+C;IAC/C,IAAI,aAAa,YAAY,aAAa,WAAW;QACjD,OAAO;IACX;IAEA,6BAA6B;IAC7B,IAAI,SAAS;QACT,qBACI,8OAAC;YAAO,WAAU;sBACd,cAAA,8OAAC;gBAAI,WAAU;0BACX,cAAA,8OAAC;oBAAI,WAAU;8BACX,cAAA,8OAAC;wBACG,KAAI;wBACJ,KAAI;wBACJ,WAAU;;;;;;;;;;;;;;;;;;;;;IAMlC;IAEA,qBACI,8OAAC;QAAO,WAAU;kBACd,cAAA,8OAAC;YAAI,WAAU;sBACX,cAAA,8OAAC;gBAAI,WAAU;;kCAEX,8OAAC;wBACG,SAAS,IAAM,OAAO,IAAI,CAAC,OAAO,eAAe;wBACjD,WAAU;kCAEV,cAAA,8OAAC;4BACG,KAAI;4BACJ,KAAI;4BACJ,WAAU;;;;;;;;;;;oBAKjB,OACG,mCAAmC,iBACnC,8OAAC;wBAAI,WAAU;;0CACX,8OAAC;gCACG,SAAS,IAAM,OAAO,IAAI,CAAC;gCAC3B,WAAW,CAAC,gDAAgD,EACxD,SAAS,gBACH,uCACA,kCACR;0CACL;;;;;;0CAGD,8OAAC;gCACG,SAAS,IAAM,OAAO,IAAI,CAAC;gCAC3B,WAAW,CAAC,gDAAgD,EACxD,UAAU,WAAW,sBACf,uCACA,kCACR;0CACL;;;;;;0CAGD,8OAAC;gCACG,SAAS,IAAM,OAAO,IAAI,CAAC;gCAC3B,WAAW,CAAC,gDAAgD,EACxD,SAAS,oCACH,uCACA,kCACR;0CACL;;;;;;0CAKD,8OAAC;gCAAI,WAAU;0CACX,cAAA,8OAAC;oCAAI,WAAU;;sDACX,8OAAC;4CAAI,WAAU;;8DACX,8OAAC;oDAAE,WAAU;8DACR,SAAS,aAAa;;;;;;8DAE3B,8OAAC;oDAAE,WAAU;8DACR,SAAS,QAAQ;;;;;;;;;;;;sDAG1B,8OAAC;4CACG,SAAS;4CACT,WAAU;sDACb;;;;;;;;;;;;;;;;;;;;;;+BAOb,uBAAuB,iBACvB,8OAAC;wBAAI,WAAU;;0CACX,8OAAC;gCACG,SAAS,IAAM,OAAO,IAAI,CAAC;gCAC3B,WAAU;0CACb;;;;;;0CAGD,8OAAC;gCACG,SAAS,IAAM,OAAO,IAAI,CAAC;gCAC3B,WAAU;0CACb;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAS7B"}}]
}